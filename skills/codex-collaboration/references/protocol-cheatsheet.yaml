# Codex-Collab Protocol Cheatsheet v1.0
# Minimum viable header for structured communication between Claude Code and Codex CLI
# Full schema: protocol-schema.yaml

protocol: codex-collab/v1
format: yaml

rules:
  - respond with exactly one top-level YAML mapping
  - include required fields: type, id, status, body
  - if unsure or blocked, use type=action_request with clarifying questions
  - include next_action (continue|stop) to signal discussion flow

types:
  task_card:
    description: Task definition with acceptance criteria
    body: {title, context, requirements, acceptance_criteria, proposed_steps, risks, test_considerations}
  result_report:
    description: Execution results with check status
    body: {summary, changes, tests, risks, checks}
  action_request:
    description: Request for information or decision
    body: {question, options, expected_response}
  review:
    description: Review verdict and findings
    body: {verdict, summary, findings, suggestions}

status: [ok, partial, blocked]
verdict: [pass, conditional, fail]
severity: [low, medium, high]
next_action: [continue, stop]

# Multi-turn discussion
# - Use next_action: continue when you need clarification or want to continue discussion
# - Use next_action: stop when the task is complete or no further discussion needed
# - Claude will iterate up to max_iterations (default: 3) based on next_action
